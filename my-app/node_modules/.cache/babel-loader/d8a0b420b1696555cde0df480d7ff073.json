{"ast":null,"code":"import _asyncToGenerator from\"/Users/apple/Documents/GitHub/Nada/-blockchain-developer-bootcamp-final-project/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/apple/Documents/GitHub/Nada/-blockchain-developer-bootcamp-final-project/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/apple/Documents/GitHub/Nada/-blockchain-developer-bootcamp-final-project/my-app/node_modules/@babel/runtime/regenerator/index.js\";import\"./App.css\";import{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import VisiToken from\"./contracts/Vision.json\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var visiTokenAddress=\"0x5d5961a9D299ca0801133f19488510308935668c\";function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),maticAmount=_useState2[0],setMaticAmount=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),visiAmount=_useState4[0],setVisiAmount=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),visiAmountToSent=_useState6[0],setVisiAmountToSend=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),exchangeAmount=_useState8[0],setExchangeAmount=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),addressTo=_useState10[0],setAddressTo=_useState10[1];var contract;var provider;var signer;var address;useEffect(function(){getStarted();},[]);function requestAccount(){return _requestAccount.apply(this,arguments);}function _requestAccount(){_requestAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return window.ethereum.request({method:\"eth_requestAccounts\"});case 2:case\"end\":return _context.stop();}}},_callee);}));return _requestAccount.apply(this,arguments);}function getStarted(){return _getStarted.apply(this,arguments);}function _getStarted(){_getStarted=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var account,balance;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(typeof window.ethereum!==\"undefined\")){_context2.next=22;break;}_context2.next=3;return requestAccount();case 3:account=_context2.sent;// Request MetaMask account\nprovider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();// Get the signer\n_context2.next=8;return signer.getAddress();case 8:address=_context2.sent;_context2.t0=console;_context2.next=12;return signer.getAddress();case 12:_context2.t1=_context2.sent;_context2.t0.log.call(_context2.t0,\"Account:\",_context2.t1);contract=new ethers.Contract(visiTokenAddress,VisiToken.abi);// Call the contract and pass in the smart contract address, abi & signer\n_context2.next=17;return provider.getBalance(address);case 17:balance=_context2.sent;console.log(balance);setMaticAmount(ethers.utils.formatEther(balance).slice(0,6));_context2.next=22;return contract.balanceOf(address).then(function(balance){setVisiAmount(balance);});case 22:case\"end\":return _context2.stop();}}},_callee2);}));return _getStarted.apply(this,arguments);}function sendEthToContract(){return _sendEthToContract.apply(this,arguments);}function _sendEthToContract(){_sendEthToContract=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return contract.transfer(visiTokenAddress,ethers.utils.formatEther(exchangeAmount)).then(function(result){return console.log(\"success\",result);}).catch(function(err){console.log(\"Failed with error: \"+err);});case 2:_context3.next=4;return contract.transfer(address,exchangeAmount).then(function(result){return console.log(\"success\",result);}).catch(function(err){console.log(\"Failed with error: \"+err);});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _sendEthToContract.apply(this,arguments);}function sendVisiToAccount(){return _sendVisiToAccount.apply(this,arguments);}function _sendVisiToAccount(){_sendVisiToAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var tx;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return contract.transferFrom(address,addressTo,ethers.utils.formatEther(visiAmountToSent)).then(function(result){return console.log(\"success\",result);}).catch(function(err){console.log(\"Failed with error: \"+err);});case 2:tx=_context4.sent;case 3:case\"end\":return _context4.stop();}}},_callee4);}));return _sendVisiToAccount.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"VISI Token\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Hello This is your Matic balance \",maticAmount]}),/*#__PURE__*/_jsx(\"p\",{children:\"!! Please note this uses the Matic test network. Using any other network will result in lost funds. !!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendEthToContract,children:\"Get Visi\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setExchangeAmount(e.target.value);},placeholder:\"Send your Matic\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Hello This is your Visi balance \",visiAmount||0]}),/*#__PURE__*/_jsx(\"p\",{children:\"!! Please note this uses the Matic test network. Using any other network will result in lost funds. !!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendVisiToAccount,children:\"Sent Visi\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setAddressTo(e.target.value);},placeholder:\"Address you want to sent Visi Too\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setVisiAmountToSend(e.target.value);},placeholder:\"Amount of Visi\"})]})});}export default App;","map":{"version":3,"sources":["/Users/apple/Documents/GitHub/Nada/-blockchain-developer-bootcamp-final-project/my-app/src/App.js"],"names":["useState","useEffect","ethers","VisiToken","visiTokenAddress","App","maticAmount","setMaticAmount","visiAmount","setVisiAmount","visiAmountToSent","setVisiAmountToSend","exchangeAmount","setExchangeAmount","addressTo","setAddressTo","contract","provider","signer","address","getStarted","requestAccount","window","ethereum","request","method","account","providers","Web3Provider","getSigner","getAddress","console","log","Contract","abi","getBalance","balance","utils","formatEther","slice","balanceOf","then","sendEthToContract","transfer","result","catch","err","sendVisiToAccount","transferFrom","tx","e","target","value"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\n\nimport VisiToken from \"./contracts/Vision.json\";\n\nconst visiTokenAddress = \"0x5d5961a9D299ca0801133f19488510308935668c\";\nfunction App() {\n  const [maticAmount, setMaticAmount] = useState();\n  const [visiAmount, setVisiAmount] = useState();\n  const [visiAmountToSent, setVisiAmountToSend] = useState();\n  const [exchangeAmount, setExchangeAmount] = useState();\n  const [addressTo, setAddressTo] = useState();\n\n  let contract;\n  let provider;\n\n  let signer;\n  let address;\n  useEffect(() => {\n    getStarted();\n  }, []);\n\n  async function requestAccount() {\n    // Function to connect with user's MetaMask wallet\n    await window.ethereum.request({ method: \"eth_requestAccounts\" });\n  }\n\n  async function getStarted() {\n    if (typeof window.ethereum !== \"undefined\") {\n      const account = await requestAccount(); // Request MetaMask account\n      provider = new ethers.providers.Web3Provider(window.ethereum);\n      signer = provider.getSigner(); // Get the signer\n      address = await signer.getAddress();\n      console.log(\"Account:\", await signer.getAddress());\n      contract = new ethers.Contract(visiTokenAddress, VisiToken.abi); // Call the contract and pass in the smart contract address, abi & signer\n      let balance = await provider.getBalance(address);\n      console.log(balance);\n      setMaticAmount(ethers.utils.formatEther(balance).slice(0, 6));\n\n      await contract.balanceOf(address).then((balance) => {\n        setVisiAmount(balance);\n      });\n      // let updatedWager = ethers.utils.parseEther(wager.toString()); // Convert wager state variable to ethers.js format\n      // const tx = await contract.newCoinToss({ value: updatedWager }); // Call the contract function and pass in the wager\n    }\n  }\n\n  async function sendEthToContract() {\n    await contract\n      .transfer(visiTokenAddress, ethers.utils.formatEther(exchangeAmount))\n      .then((result) => console.log(\"success\", result))\n      .catch((err) => {\n        console.log(\"Failed with error: \" + err);\n      });\n    await contract\n      .transfer(address, exchangeAmount)\n      .then((result) => console.log(\"success\", result))\n      .catch((err) => {\n        console.log(\"Failed with error: \" + err);\n      });\n  }\n\n  async function sendVisiToAccount() {\n    const tx = await contract\n      .transferFrom(\n        address,\n        addressTo,\n        ethers.utils.formatEther(visiAmountToSent)\n      )\n      .then((result) => console.log(\"success\", result))\n      .catch((err) => {\n        console.log(\"Failed with error: \" + err);\n      });\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>VISI Token</h1>\n        <h4>Hello This is your Matic balance {maticAmount}</h4>\n        <p>\n          !! Please note this uses the Matic test network. Using any other\n          network will result in lost funds. !!\n        </p>\n        <button onClick={sendEthToContract}>Get Visi</button>\n\n        <input\n          onChange={(e) => setExchangeAmount(e.target.value)}\n          placeholder=\"Send your Matic\"\n        />\n\n        <br />\n        <br />\n        <br />\n        <h4>Hello This is your Visi balance {visiAmount || 0}</h4>\n        <p>\n          !! Please note this uses the Matic test network. Using any other\n          network will result in lost funds. !!\n        </p>\n        <button onClick={sendVisiToAccount}>Sent Visi</button>\n\n        <input\n          onChange={(e) => setAddressTo(e.target.value)}\n          placeholder=\"Address you want to sent Visi Too\"\n        />\n        <input\n          onChange={(e) => setVisiAmountToSend(e.target.value)}\n          placeholder=\"Amount of Visi\"\n        />\n      </header>\n    </div>\n  );\n}\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}